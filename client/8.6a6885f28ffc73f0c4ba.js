(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{bqYg:function(t,n,i){"use strict";i.r(n),i.d(n,"MonthlyDistributionModule",(function(){return ot}));var o=i("ofXK"),e=i("3Pt+"),r=i("tyNb"),a=i("zR64"),c=i("PCNd"),s=i("mrSG"),p=i("LvDl"),l=i("LRne"),d=i("JX91"),m=i("eIep"),g=i("URDK"),b=i("fXoL"),u=i("/JWr"),h=i("nhsl"),y=i("n8Gi"),f=i("bP2Y"),x=i("JqCM"),M=i("AicK"),C=i("8mtn"),P=i("uENB"),O=i("jht6");function _(t,n){1&t&&b.Mb(0,"ngx-form-input-number",3),2&t&&b.ic("formInputField",n.$implicit)}function v(t,n){1&t&&b.Mb(0,"ngx-form-input-number",3),2&t&&b.ic("formInputField",n.$implicit)}function w(t,n){if(1&t){const t=b.Rb();b.Qb(0,"div",1),b.Qb(1,"form",2),b.Yb("ngSubmit",(function(){return b.nc(t),b.ac().submitForm()})),b.Mb(2,"ngx-form-input",3),b.Qb(3,"div",4),b.Qb(4,"h2",5),b.yc(5),b.Qb(6,"a",6),b.Mb(7,"i-feather",7),b.yc(8," Add more fields"),b.Pb(),b.Pb(),b.wc(9,_,1,1,"ngx-form-input-number",8),b.Pb(),b.Qb(10,"div",4),b.Qb(11,"h2",5),b.yc(12),b.Qb(13,"a",6),b.Mb(14,"i-feather",7),b.yc(15," Add more fields"),b.Pb(),b.Pb(),b.wc(16,v,1,1,"ngx-form-input-number",8),b.Pb(),b.Qb(17,"div",9),b.Qb(18,"p",10),b.yc(19," Remaining spending money: "),b.Pb(),b.Qb(20,"p",11),b.yc(21),b.bc(22,"currency"),b.bc(23,"async"),b.Pb(),b.Pb(),b.Mb(24,"app-form-errors",12),b.Mb(25,"app-form-submit",13),b.Pb(),b.Pb()}if(2&t){const t=b.ac();b.zb(1),b.ic("formGroup",t.form.formGroup),b.zb(1),b.ic("formInputField",t.form.fields[0]),b.zb(3),b.Ac(" ",t.form.fields[1].label," "),b.zb(4),b.ic("ngForOf",t.form.fields[1].fields),b.zb(3),b.Ac(" ",t.form.fields[2].label," "),b.zb(4),b.ic("ngForOf",t.form.fields[2].fields),b.zb(5),b.Ac(" ",b.dc(22,9,b.cc(23,12,t.remainingBalance),"\xa3")," "),b.zb(3),b.ic("appFormErrors",t.errors),b.zb(1),b.ic("form",t.form.formGroup)}}let D=(()=>{class t extends g.a{constructor(t,n,i,o,e,r,a,c){super(a,o,r,c,"monthly-distribution"),this._formFactory=t,this._settingsService=n,this._dateService=i}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Object(s.a)(this,void 0,void 0,(function*(){yield this._getFields(),t.ngOnInit.call(this),this._watchFormToCalculateRemaining()}))}_createForm(){const t=[{name:"date",label:"Date",type:a.h.MONTH,defaultValue:this._dateService.getCurrentMonthAndYearForForm()},{name:"income",label:"Income",fields:this._mapCustomFields(this._incomingFields)},{name:"outgoing",label:"Outgoings",fields:this._mapCustomFields(this._outgoingFields)}];return this._formFactory.createForm(t)}_watchFormToCalculateRemaining(){this.remainingBalance=this.form.formGroup.valueChanges.pipe(Object(d.a)([{}]),Object(m.a)(t=>{const n=Object(p.reduce)(t.income,(t,n)=>t+parseFloat(n||0),0),i=Object(p.reduce)(t.outgoing,(t,n)=>t+parseFloat(n||0),0);return Object(l.a)(n-i)}))}_getFields(){return Object(s.a)(this,void 0,void 0,(function*(){const{data:t}=yield this._settingsService.getSettings();this._incomingFields=t.monthlyDistributionIncomeFields,this._outgoingFields=t.monthlyDistributionOutgoingFields}))}_mapCustomFields(t){return t.map(t=>{let n,i;return"balance carried"===t&&(n="This field is how much balance you have carried over from last month in to the current month, to help work out your total monthly spending.",i="Balance carried from last month"),"salary"===t&&(n="If updating your logs at the start of the month, this should be the salary you've just been paid at the end of last month."),{name:t,label:i||Object(p.startCase)(t),type:a.h.NUMBER,tooltip:n}})}}return t.\u0275fac=function(n){return new(n||t)(b.Lb(a.a),b.Lb(u.a),b.Lb(h.a),b.Lb(y.a),b.Lb(f.a),b.Lb(r.c),b.Lb(x.c),b.Lb(M.a))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-monthly-distribution-entry-form"]],features:[b.wb],decls:1,vars:1,consts:[["class","MonthlyDistributionEntryForm-container animate-page-in",4,"ngIf"],[1,"MonthlyDistributionEntryForm-container","animate-page-in"],[1,"MonthlyDistributionEntryForm-form",3,"formGroup","ngSubmit"],[3,"formInputField"],[1,"MonthlyDistributionEntryForm-section"],[1,"MonthlyDistributionEntryForm-subtitle"],["routerLink","../../settings",1,"MonthlyDistributionEntryForm-moreFieldsLink"],["name","plus"],[3,"formInputField",4,"ngFor","ngForOf"],[1,"MonthlyDistributionEntryForm-remainingBalance"],[1,"MonthlyDistributionEntryForm-label"],[1,"MonthlyDistributionEntryForm-value"],[3,"appFormErrors"],["value","Save entry",1,"MonthlyDistributionEntryForm-submit",3,"form"]],template:function(t,n){1&t&&b.wc(0,w,26,14,"div",0),2&t&&b.ic("ngIf",n.form)},directives:[o.m,e.t,e.k,e.e,a.i,r.e,C.a,o.l,P.a,O.a,a.e],pipes:[o.d,o.b],styles:['.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding:var(--spacing-page-top) var(--spacing-page-side);height:100%}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding-top:calc(58px + var(--spacing-page-top))}}.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:400px;display:flex;flex-direction:column}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:100%}}.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{padding-top:30px;font-weight:500;color:#5a5a5a;font-size:22px;margin-bottom:20px;display:flex;align-items:baseline;justify-content:space-between}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{font-size:20px;padding-top:10px}}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]{color:#3657dc;font-weight:500;text-decoration:none;font-size:14px;display:flex;align-items:center}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]   i-feather[_ngcontent-%COMP%]{height:14px;width:14px;margin-right:5px}.MonthlyDistributionEntryForm-remainingBalance[_ngcontent-%COMP%]{background-color:rgba(54,87,220,.08);padding:30px;border-radius:10px;text-align:center;margin-bottom:20px}.MonthlyDistributionEntryForm-label[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px;color:#2b6cb0}.MonthlyDistributionEntryForm-value[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#3657dc}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-submit[_ngcontent-%COMP%]{display:none}}']}),t})();var F=i("1LVl");function k(t,n){1&t&&b.Mb(0,"ngx-form-input-number",3),2&t&&b.ic("formInputField",n.$implicit)}function L(t,n){1&t&&b.Mb(0,"ngx-form-input-number",3),2&t&&b.ic("formInputField",n.$implicit)}function E(t,n){if(1&t){const t=b.Rb();b.Qb(0,"div",1),b.Qb(1,"form",2),b.Yb("ngSubmit",(function(){return b.nc(t),b.ac().submitForm()})),b.Mb(2,"ngx-form-input",3),b.Qb(3,"div",4),b.Qb(4,"h2",5),b.yc(5),b.Qb(6,"a",6),b.Mb(7,"i-feather",7),b.yc(8," Add more fields"),b.Pb(),b.Pb(),b.wc(9,k,1,1,"ngx-form-input-number",8),b.Pb(),b.Qb(10,"div",4),b.Qb(11,"h2",5),b.yc(12),b.Qb(13,"a",6),b.Mb(14,"i-feather",7),b.yc(15," Add more fields"),b.Pb(),b.Pb(),b.wc(16,L,1,1,"ngx-form-input-number",8),b.Pb(),b.Qb(17,"div",9),b.Qb(18,"p",10),b.yc(19," Remaining spending money: "),b.Pb(),b.Qb(20,"p",11),b.yc(21),b.bc(22,"currency"),b.bc(23,"async"),b.Pb(),b.Pb(),b.Mb(24,"app-form-errors",12),b.Mb(25,"app-form-submit",13),b.Pb(),b.Pb()}if(2&t){const t=b.ac();b.zb(1),b.ic("formGroup",t.form.formGroup),b.zb(1),b.ic("formInputField",t.form.fields[0]),b.zb(3),b.Ac(" ",t.form.fields[1].label," "),b.zb(4),b.ic("ngForOf",t.form.fields[1].fields),b.zb(3),b.Ac(" ",t.form.fields[2].label," "),b.zb(4),b.ic("ngForOf",t.form.fields[2].fields),b.zb(5),b.Ac(" ",b.dc(22,9,b.cc(23,12,t.remainingBalance),"\xa3")," "),b.zb(3),b.ic("appFormErrors",t.errors),b.zb(1),b.ic("form",t.form.formGroup)}}let I=(()=>{class t extends F.a{constructor(t,n,i,o,e){super(n,t,i,o,e,"monthly-distribution")}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Object(s.a)(this,void 0,void 0,(function*(){yield t.ngOnInit.call(this),this._watchFormToCalculateRemaining()}))}_createForm(){const t=[{name:"date",label:"Date",type:a.h.MONTH,defaultValue:this._resourceDate,disabled:!0,validators:{required:!0}},{name:"income",label:"Income",fields:this._mapCustomFields(this._meta.incomeFields,"income")},{name:"outgoing",label:"Outgoings",fields:this._mapCustomFields(this._meta.outgoingFields,"outgoing")}];return this._formFactory.createForm(t)}_watchFormToCalculateRemaining(){this.remainingBalance=this.form.formGroup.valueChanges.pipe(Object(d.a)(this.form.value),Object(m.a)(t=>{const n=Object(p.reduce)(t.income,(t,n)=>t+parseFloat(n||0),0),i=Object(p.reduce)(t.outgoing,(t,n)=>t+parseFloat(n||0),0);return Object(l.a)(n-i)}))}_mapCustomFields(t,n){return t.map(t=>{let i,o;return"balance carried"===t&&(i="This field is how much balance you have carried over from last month in to the current month, to help work out your total monthly spending.",o="Balance carried from last month"),{name:t,label:o||Object(p.startCase)(t),type:a.h.NUMBER,tooltip:i,defaultValue:this._data[n][t]}})}}return t.\u0275fac=function(n){return new(n||t)(b.Lb(y.a),b.Lb(a.a),b.Lb(r.c),b.Lb(r.a),b.Lb(M.a))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-monthly-distribution-update-form"]],features:[b.wb],decls:1,vars:1,consts:[["class","MonthlyDistributionEntryForm-container animate-page-in",4,"ngIf"],[1,"MonthlyDistributionEntryForm-container","animate-page-in"],[1,"MonthlyDistributionEntryForm-form",3,"formGroup","ngSubmit"],[3,"formInputField"],[1,"MonthlyDistributionEntryForm-section"],[1,"MonthlyDistributionEntryForm-subtitle"],["routerLink","../../settings",1,"MonthlyDistributionEntryForm-moreFieldsLink"],["name","plus"],[3,"formInputField",4,"ngFor","ngForOf"],[1,"MonthlyDistributionEntryForm-remainingBalance"],[1,"MonthlyDistributionEntryForm-label"],[1,"MonthlyDistributionEntryForm-value"],[3,"appFormErrors"],["value","Save entry",1,"MonthlyDistributionEntryForm-submit",3,"form"]],template:function(t,n){1&t&&b.wc(0,E,26,14,"div",0),2&t&&b.ic("ngIf",n.form)},directives:[o.m,e.t,e.k,e.e,a.i,r.e,C.a,o.l,P.a,O.a,a.e],pipes:[o.d,o.b],styles:['.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding:var(--spacing-page-top) var(--spacing-page-side);height:100%}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding-top:calc(58px + var(--spacing-page-top))}}.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:400px;display:flex;flex-direction:column}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:100%}}.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{padding-top:30px;font-weight:500;color:#5a5a5a;font-size:22px;margin-bottom:20px;display:flex;align-items:baseline;justify-content:space-between}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{font-size:20px;padding-top:10px}}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]{color:#3657dc;font-weight:500;text-decoration:none;font-size:14px;display:flex;align-items:center}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]   i-feather[_ngcontent-%COMP%]{height:14px;width:14px;margin-right:5px}.MonthlyDistributionEntryForm-remainingBalance[_ngcontent-%COMP%]{background-color:rgba(54,87,220,.08);padding:30px;border-radius:10px;text-align:center;margin-bottom:20px}.MonthlyDistributionEntryForm-label[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px;color:#2b6cb0}.MonthlyDistributionEntryForm-value[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#3657dc}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-submit[_ngcontent-%COMP%]{display:none}}']}),t})();var z=i("XNiG"),Q=i("1G5W"),A=i("B6aI"),S=i("Fxv7"),j=i("dhrX"),T=i("L21D");let B=(()=>{class t{constructor(t){this._chartService=t}ngOnChanges(){const t=Object(p.map)(this.monthlyDistributionPieChartData.outgoing,(t,n)=>({label:n,value:t})).sort((t,n)=>n.value-t.value);this._chartService.createPieChart("monthlyDistributionPieChart",{labels:t.map(t=>Object(p.startCase)(t.label)),datasets:[{data:t.map(t=>t.value),backgroundColor:[...S.b].reverse()}]},{legendPosition:"left"})}}return t.\u0275fac=function(n){return new(n||t)(b.Lb(j.a))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-monthly-distribution-pie-chart"]],inputs:{monthlyDistributionPieChartData:"monthlyDistributionPieChartData"},features:[b.xb],decls:2,vars:0,consts:[["cardTitle","Distribution this month"],["id","monthlyDistributionPieChart"]],template:function(t,n){1&t&&(b.Qb(0,"app-card",0),b.Mb(1,"canvas",1),b.Pb())},directives:[T.a],styles:[""]}),t})(),R=(()=>{class t{constructor(t){this._chartService=t}ngOnChanges(){const t=[...this.uncommittedSpendingChartData].reverse();this._chartService.createBarChart("monthlyDistributionSpendingChart",{labels:t.map(t=>t.date),datasets:[{label:"Uncommitted spending this month",data:t.map(t=>t.value),borderColor:"rgba(255,255,255, 0)",backgroundColor:[...S.a],borderWidth:2}]})}}return t.\u0275fac=function(n){return new(n||t)(b.Lb(j.a))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-uncommitted-spending-chart"]],inputs:{uncommittedSpendingChartData:"uncommittedSpendingChartData"},features:[b.xb],decls:2,vars:0,consts:[["cardTitle","Disposable income spending"],["id","monthlyDistributionSpendingChart"]],template:function(t,n){1&t&&(b.Qb(0,"app-card",0),b.Mb(1,"canvas",1),b.Pb())},directives:[T.a],styles:[""]}),t})(),$=(()=>{class t{constructor(t){this._chartService=t}ngOnChanges(){const t=Object(p.map)(this.monthlyDistributionSpendingTrendChartData,(t,n)=>({label:n,value:t})).sort((t,n)=>n.value-t.value);this._chartService.createPieChart("monthlyDistributionPieChart2",{labels:t.map(t=>Object(p.startCase)(t.label)),datasets:[{data:t.map(t=>t.value),backgroundColor:[...S.b].reverse()}]},{legendPosition:"left"})}}return t.\u0275fac=function(n){return new(n||t)(b.Lb(j.a))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-monthly-distribution-spending-trend-chart"]],inputs:{monthlyDistributionSpendingTrendChartData:"monthlyDistributionSpendingTrendChartData"},features:[b.xb],decls:2,vars:0,consts:[["cardTitle","All Time Distribution"],["id","monthlyDistributionPieChart2"]],template:function(t,n){1&t&&(b.Qb(0,"app-card",0),b.Mb(1,"canvas",1),b.Pb())},directives:[T.a],styles:[""]}),t})();var Y=i("DFzi"),G=i("U5Aj"),N=i("lTCs"),J=i("Xv+k"),U=i("sJgw"),X=i("HZTh");function V(t,n){if(1&t&&(b.Qb(0,"td",4),b.yc(1),b.bc(2,"currency"),b.Pb()),2&t){const t=n.$implicit,i=b.ac().$implicit,o=b.ac();b.Db("is-negative",i.income[t]<0)("is-positive",i.income[t]>0),b.zb(1),b.Ac(" ",b.fc(2,5,i.income[t],o.preferredCurrency,"symbol","1.0-2")," ")}}function q(t,n){if(1&t&&(b.Qb(0,"td",4),b.yc(1),b.bc(2,"currency"),b.Pb()),2&t){const t=n.$implicit,i=b.ac().$implicit,o=b.ac();b.zb(1),b.Ac(" ",b.fc(2,1,i.outgoing[t],o.preferredCurrency,"symbol","1.0-2")," ")}}function H(t,n){if(1&t){const t=b.Rb();b.Qb(0,"app-table-actions",8),b.Yb("tableActionsRemove",(function(){b.nc(t);const n=b.ac().$implicit;return b.ac().removeLog(n.date)}))("tableActionsEdit",(function(){b.nc(t);const n=b.ac().$implicit;return b.ac().navigateToEditPage(n.date)})),b.Pb()}2&t&&b.ic("tableActionsCanEdit",!0)}function K(t,n){if(1&t){const t=b.Rb();b.Qb(0,"tr",3),b.Yb("click",(function(){b.nc(t);const i=n.$implicit;return b.ac().onLongPress(i.date)})),b.Qb(1,"td",4),b.yc(2),b.bc(3,"date"),b.Pb(),b.wc(4,V,3,10,"td",5),b.bc(5,"keys"),b.wc(6,q,3,6,"td",6),b.bc(7,"keys"),b.Qb(8,"td",4),b.yc(9),b.bc(10,"currency"),b.Pb(),b.wc(11,H,1,1,"app-table-actions",7),b.Pb()}if(2&t){const t=n.$implicit,i=b.ac();b.zb(2),b.Ac(" ",b.dc(3,5,t.date,"MMMM y")," "),b.zb(2),b.ic("ngForOf",b.cc(5,8,t.income)),b.zb(2),b.ic("ngForOf",b.cc(7,10,t.outgoing)),b.zb(3),b.Ac(" ",b.fc(10,12,t.remaining,i.preferredCurrency,"symbol","1.0-2")," "),b.zb(2),b.ic("ngIf",i.isEditing)}}let W=(()=>{class t extends Y.a{constructor(t,n,i,o){super(o,i,"monthly-distribution"),this._monthlyDistributionStore=t,this._popupService=n}ngOnChanges(){this.fields=this.monthlyDistributionLogCardMeta.fields.map(p.startCase),this.preferredCurrency=this.monthlyDistributionLogCardMeta.preferredCurrency}removeLog(t){return Object(s.a)(this,void 0,void 0,(function*(){try{yield this._monthlyDistributionStore.delete(t)}catch({error:n}){this._popupService.showApiError(n)}}))}}return t.\u0275fac=function(n){return new(n||t)(b.Lb(y.a),b.Lb(G.a),b.Lb(N.a),b.Lb(r.c))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-monthly-distribution-log-card"]],inputs:{monthlyDistributionLogCardItems:"monthlyDistributionLogCardItems",monthlyDistributionLogCardMeta:"monthlyDistributionLogCardMeta"},features:[b.wb,b.xb],decls:3,vars:3,consts:[["cardTitle","Monthly Log",3,"cardActions"],[3,"tableColumns"],["class","MonthlyDistributionLogCard-row",3,"click",4,"ngFor","ngForOf"],[1,"MonthlyDistributionLogCard-row",3,"click"],[1,"MonthlyDistributionLogCard-rowItem"],["class","MonthlyDistributionLogCard-rowItem",3,"is-negative","is-positive",4,"ngFor","ngForOf"],["class","MonthlyDistributionLogCard-rowItem",4,"ngFor","ngForOf"],["class","MonthlyDistributionLogCard-rowItem",3,"tableActionsCanEdit","tableActionsRemove","tableActionsEdit",4,"ngIf"],[1,"MonthlyDistributionLogCard-rowItem",3,"tableActionsCanEdit","tableActionsRemove","tableActionsEdit"]],template:function(t,n){1&t&&(b.Qb(0,"app-card",0),b.Qb(1,"app-table",1),b.wc(2,K,12,17,"tr",2),b.Pb(),b.Pb()),2&t&&(b.ic("cardActions",n.cardActions),b.zb(1),b.ic("tableColumns",n.fields),b.zb(1),b.ic("ngForOf",n.monthlyDistributionLogCardItems))},directives:[T.a,J.a,o.l,o.m,U.a],pipes:[o.f,X.a,o.d],styles:['.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistributionLogCard-row[_ngcontent-%COMP%]{padding:15px 0}.MonthlyDistributionLogCard-row[_ngcontent-%COMP%]:hover{background-color:#eef2fd;cursor:pointer}.MonthlyDistributionLogCard-rowItem[_ngcontent-%COMP%]{color:#5a5a5a;border-top:1px solid #e5e5e5;white-space:nowrap;padding:15px 15px 15px 0}']}),t})();function Z(t,n){1&t&&(b.Qb(0,"p",5),b.yc(1," To get started, you can configure your table columns in the "),b.Qb(2,"a",6),b.yc(3,"settings"),b.Pb(),b.yc(4," area, or go ahead and create a new log "),b.Qb(5,"a",7),b.yc(6,"here"),b.Pb(),b.yc(7,". "),b.Pb())}function tt(t,n){if(1&t&&(b.Qb(0,"div",8),b.Mb(1,"app-monthly-distribution-pie-chart",9),b.Mb(2,"app-uncommitted-spending-chart",10),b.Mb(3,"app-monthly-distribution-spending-trend-chart",11),b.Mb(4,"app-monthly-distribution-log-card",12),b.Pb()),2&t){const t=b.ac(2);b.zb(1),b.ic("monthlyDistributionPieChartData",t.monthlyDistributionItems[0]),b.zb(1),b.ic("uncommittedSpendingChartData",t.monthlyDistributionMeta.uncommittedSpendingData),b.zb(1),b.ic("monthlyDistributionSpendingTrendChartData",t.monthlyDistributionMeta.allTimeDistribution),b.zb(1),b.ic("monthlyDistributionLogCardItems",t.monthlyDistributionItems)("monthlyDistributionLogCardMeta",t.monthlyDistributionMeta)}}function nt(t,n){if(1&t&&(b.Qb(0,"div",2),b.wc(1,Z,8,0,"p",3),b.wc(2,tt,5,5,"ng-template",null,4,b.xc),b.Pb()),2&t){const t=b.lc(3),n=b.ac();b.zb(1),b.ic("ngIf",!n.monthlyDistributionItems.length)("ngIfElse",t)}}const it=[{path:"edit/:date",component:I},{path:"",component:(()=>{class t{constructor(t,n){this._router=t,this._monthlyDistributionStore=n,this._destroy$=new z.a}ngOnInit(){return Object(s.a)(this,void 0,void 0,(function*(){this._monthlyDistributionStore.getAll$().pipe(Object(Q.a)(this._destroy$)).subscribe(this._assignLogs.bind(this))}))}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}createNew(){this._router.navigateByUrl("monthly-distribution/create")}_assignLogs({data:t,meta:n}){return Object(s.a)(this,void 0,void 0,(function*(){this.monthlyDistributionItems=t,this.monthlyDistributionMeta=n}))}}return t.\u0275fac=function(n){return new(n||t)(b.Lb(r.c),b.Lb(y.a))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-monthly-distribution"]],decls:2,vars:1,consts:[["class","MonthlyDistribution-container animate-page-in",4,"ngIf"],["floatingActionButtonText","New log","floatingActionButtonIcon","plus",3,"floatingActionButtonAction"],[1,"MonthlyDistribution-container","animate-page-in"],["class","MonthlyDistribution-noItems",4,"ngIf","ngIfElse"],["content",""],[1,"MonthlyDistribution-noItems"],["routerLink","../settings"],["routerLink","create"],[1,"MonthlyDistribution-content"],[1,"MonthlyDistribution-item","MonthlyDistribution-pie","animate-list-item",3,"monthlyDistributionPieChartData"],[1,"MonthlyDistribution-item","MonthlyDistribution-line","animate-list-item",3,"uncommittedSpendingChartData"],[1,"MonthlyDistribution-item","MonthlyDistribution-trending","animate-list-item",3,"monthlyDistributionSpendingTrendChartData"],[1,"MonthlyDistribution-item","MonthlyDistribution-log","animate-list-item",3,"monthlyDistributionLogCardItems","monthlyDistributionLogCardMeta"]],template:function(t,n){1&t&&(b.wc(0,nt,4,2,"div",0),b.Qb(1,"app-floating-action-button",1),b.Yb("floatingActionButtonAction",(function(){return n.createNew()})),b.Pb()),2&t&&b.ic("ngIf",n.monthlyDistributionItems)},directives:[o.m,A.a,r.e,B,R,$,W],styles:['.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistribution-container[_ngcontent-%COMP%]{padding:var(--spacing-page-top) var(--spacing-page-side);height:100%}@media only screen and (max-width:540px){.MonthlyDistribution-container[_ngcontent-%COMP%]{padding-top:calc(58px + var(--spacing-page-top))}}.MonthlyDistribution-noItems[_ngcontent-%COMP%]{color:#5a5a5a;margin-bottom:20px;max-width:700px;line-height:160%;font-size:18px}.MonthlyDistribution-noItems[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3657dc;font-weight:500;text-decoration:none}.MonthlyDistribution-noItems[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.MonthlyDistribution-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-gap:30px;grid-template-areas:"pie line trending" "log log log"}@media only screen and (max-width:1024px){.MonthlyDistribution-content[_ngcontent-%COMP%]{display:block}}.MonthlyDistribution-item[_ngcontent-%COMP%]{display:block;min-width:0}@media only screen and (max-width:1024px){.MonthlyDistribution-item[_ngcontent-%COMP%] + .MonthlyDistribution-item[_ngcontent-%COMP%]{margin-top:30px}}@media only screen and (max-width:540px){.MonthlyDistribution-item[_ngcontent-%COMP%] + .MonthlyDistribution-item[_ngcontent-%COMP%]{margin-top:20px}}.MonthlyDistribution-trending[_ngcontent-%COMP%]{grid-area:trending}.MonthlyDistribution-pie[_ngcontent-%COMP%]{grid-area:pie}.MonthlyDistribution-log[_ngcontent-%COMP%]{grid-area:log}.MonthlyDistribution-line[_ngcontent-%COMP%]{grid-area:line}.MonthlyDistribution-informationMessage[_ngcontent-%COMP%]{margin-top:0}']}),t})()},{path:"create",component:D}];let ot=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(n){return new(n||t)},imports:[[o.c,a.j,e.f,e.p,c.a,r.f.forChild(it)]]}),t})()}}]);