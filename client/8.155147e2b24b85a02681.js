(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{bqYg:function(t,n,i){"use strict";i.r(n),i.d(n,"MonthlyDistributionModule",(function(){return nt}));var o=i("ofXK"),e=i("3Pt+"),r=i("tyNb"),a=i("5/6f"),c=i("PCNd"),s=i("VPM5"),p=i("mrSG"),l=i("LvDl"),m=i("LRne"),d=i("JX91"),g=i("eIep"),b=i("URDK"),u=i("fXoL"),h=i("/JWr"),f=i("nhsl"),y=i("n8Gi"),x=i("bP2Y"),M=i("JqCM"),C=i("AicK"),O=i("8mtn"),_=i("uENB"),P=i("jht6");function v(t,n){1&t&&u.Tb(0,"ngx-form-input-number",3),2&t&&u.pc("formInputField",n.$implicit)}function D(t,n){1&t&&u.Tb(0,"ngx-form-input-number",3),2&t&&u.pc("formInputField",n.$implicit)}function w(t,n){if(1&t){const t=u.Yb();u.Xb(0,"div",1),u.Xb(1,"form",2),u.fc("ngSubmit",(function(){return u.uc(t),u.hc().submitForm()})),u.Tb(2,"ngx-form-input",3),u.Xb(3,"div",4),u.Xb(4,"h2",5),u.Fc(5),u.Xb(6,"a",6),u.Tb(7,"i-feather",7),u.Fc(8," Add more fields"),u.Wb(),u.Wb(),u.Dc(9,v,1,1,"ngx-form-input-number",8),u.Wb(),u.Xb(10,"div",4),u.Xb(11,"h2",5),u.Fc(12),u.Xb(13,"a",6),u.Tb(14,"i-feather",7),u.Fc(15," Add more fields"),u.Wb(),u.Wb(),u.Dc(16,D,1,1,"ngx-form-input-number",8),u.Wb(),u.Xb(17,"div",9),u.Xb(18,"p",10),u.Fc(19," Remaining spending money: "),u.Wb(),u.Xb(20,"p",11),u.Fc(21),u.ic(22,"currency"),u.ic(23,"async"),u.Wb(),u.Wb(),u.Tb(24,"app-form-errors",12),u.Tb(25,"app-form-submit",13),u.Wb(),u.Wb()}if(2&t){const t=u.hc();u.Gb(1),u.pc("formGroup",t.form.formGroup),u.Gb(1),u.pc("formInputField",t.form.fields[0]),u.Gb(3),u.Hc(" ",t.form.fields[1].label," "),u.Gb(4),u.pc("ngForOf",t.form.fields[1].fields),u.Gb(3),u.Hc(" ",t.form.fields[2].label," "),u.Gb(4),u.pc("ngForOf",t.form.fields[2].fields),u.Gb(5),u.Hc(" ",u.kc(22,9,u.jc(23,12,t.remainingBalance),"\xa3")," "),u.Gb(3),u.pc("appFormErrors",t.errors),u.Gb(1),u.pc("form",t.form.formGroup)}}let F=(()=>{class t extends b.a{constructor(t,n,i,o,e,r,a,c){super(a,o,r,c,"monthly-distribution"),this._formFactory=t,this._settingsService=n,this._dateService=i}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Object(p.a)(this,void 0,void 0,(function*(){yield this._getFields(),t.ngOnInit.call(this),this._watchFormToCalculateRemaining()}))}_createForm(){const t=[{name:"date",label:"Date",type:a.h.MONTH,defaultValue:this._dateService.getCurrentMonthAndYearForForm()},{name:"income",label:"Income",fields:this._mapCustomFields(this._incomingFields)},{name:"outgoing",label:"Outgoings",fields:this._mapCustomFields(this._outgoingFields)}];return this._formFactory.createForm(t)}_watchFormToCalculateRemaining(){this.remainingBalance=this.form.formGroup.valueChanges.pipe(Object(d.a)([{}]),Object(g.a)(t=>{const n=Object(l.reduce)(t.income,(t,n)=>t+parseFloat(n||0),0),i=Object(l.reduce)(t.outgoing,(t,n)=>t+parseFloat(n||0),0);return Object(m.a)(n-i)}))}_getFields(){return Object(p.a)(this,void 0,void 0,(function*(){const{data:t}=yield this._settingsService.getSettings();this._incomingFields=t.monthlyDistributionIncomeFields,this._outgoingFields=t.monthlyDistributionOutgoingFields}))}_mapCustomFields(t){return t.map(t=>{let n,i;return"balance carried"===t&&(n="This field is how much balance you have carried over from last month in to the current month, to help work out your total monthly spending.",i="Balance carried from last month"),"salary"===t&&(n="If updating your logs at the start of the month, this should be the salary you've just been paid at the end of last month."),{name:t,label:i||Object(l.startCase)(t),type:a.h.NUMBER,tooltip:n}})}}return t.\u0275fac=function(n){return new(n||t)(u.Sb(a.a),u.Sb(h.a),u.Sb(f.a),u.Sb(y.a),u.Sb(x.a),u.Sb(r.c),u.Sb(M.c),u.Sb(C.a))},t.\u0275cmp=u.Mb({type:t,selectors:[["app-monthly-distribution-entry-form"]],features:[u.Db],decls:1,vars:1,consts:[["class","MonthlyDistributionEntryForm-container animate-page-in",4,"ngIf"],[1,"MonthlyDistributionEntryForm-container","animate-page-in"],[1,"MonthlyDistributionEntryForm-form",3,"formGroup","ngSubmit"],[3,"formInputField"],[1,"MonthlyDistributionEntryForm-section"],[1,"MonthlyDistributionEntryForm-subtitle"],["routerLink","../../settings",1,"MonthlyDistributionEntryForm-moreFieldsLink"],["name","plus"],[3,"formInputField",4,"ngFor","ngForOf"],[1,"MonthlyDistributionEntryForm-remainingBalance"],[1,"MonthlyDistributionEntryForm-label"],[1,"MonthlyDistributionEntryForm-value"],[3,"appFormErrors"],["value","Save entry",1,"MonthlyDistributionEntryForm-submit",3,"form"]],template:function(t,n){1&t&&u.Dc(0,w,26,14,"div",0),2&t&&u.pc("ngIf",n.form)},directives:[o.m,e.u,e.k,e.e,a.i,r.e,O.a,o.l,_.a,P.a,a.e],pipes:[o.d,o.b],styles:['@keyframes zoom-in{0%{transform:scale(0)}to{transform:scale(1)}}.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:20px 15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding:var(--spacing-page-top) var(--spacing-page-side);height:100%}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding-top:calc(58px + var(--spacing-page-top))}}.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:400px;display:flex;flex-direction:column}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:100%}}.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{padding-top:30px;font-weight:500;color:#5a5a5a;font-size:22px;margin-bottom:20px;display:flex;align-items:baseline;justify-content:space-between}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{font-size:20px;padding-top:10px}}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]{color:#3657dc;font-weight:500;text-decoration:none;font-size:14px;display:flex;align-items:center}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]   i-feather[_ngcontent-%COMP%]{height:14px;width:14px;margin-right:5px}.MonthlyDistributionEntryForm-remainingBalance[_ngcontent-%COMP%]{background-color:rgba(54,87,220,.08);padding:30px;border-radius:10px;text-align:center;margin-bottom:20px}.MonthlyDistributionEntryForm-label[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px;color:#2b6cb0}.MonthlyDistributionEntryForm-value[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#3657dc}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-submit[_ngcontent-%COMP%]{display:none}}']}),t})();var k=i("1LVl");function E(t,n){1&t&&u.Tb(0,"ngx-form-input-number",3),2&t&&u.pc("formInputField",n.$implicit)}function S(t,n){1&t&&u.Tb(0,"ngx-form-input-number",3),2&t&&u.pc("formInputField",n.$implicit)}function I(t,n){if(1&t){const t=u.Yb();u.Xb(0,"div",1),u.Xb(1,"form",2),u.fc("ngSubmit",(function(){return u.uc(t),u.hc().submitForm()})),u.Tb(2,"ngx-form-input",3),u.Xb(3,"div",4),u.Xb(4,"h2",5),u.Fc(5),u.Xb(6,"a",6),u.Tb(7,"i-feather",7),u.Fc(8," Add more fields"),u.Wb(),u.Wb(),u.Dc(9,E,1,1,"ngx-form-input-number",8),u.Wb(),u.Xb(10,"div",4),u.Xb(11,"h2",5),u.Fc(12),u.Xb(13,"a",6),u.Tb(14,"i-feather",7),u.Fc(15," Add more fields"),u.Wb(),u.Wb(),u.Dc(16,S,1,1,"ngx-form-input-number",8),u.Wb(),u.Xb(17,"div",9),u.Xb(18,"p",10),u.Fc(19," Remaining spending money: "),u.Wb(),u.Xb(20,"p",11),u.Fc(21),u.ic(22,"currency"),u.ic(23,"async"),u.Wb(),u.Wb(),u.Tb(24,"app-form-errors",12),u.Tb(25,"app-form-submit",13),u.Wb(),u.Wb()}if(2&t){const t=u.hc();u.Gb(1),u.pc("formGroup",t.form.formGroup),u.Gb(1),u.pc("formInputField",t.form.fields[0]),u.Gb(3),u.Hc(" ",t.form.fields[1].label," "),u.Gb(4),u.pc("ngForOf",t.form.fields[1].fields),u.Gb(3),u.Hc(" ",t.form.fields[2].label," "),u.Gb(4),u.pc("ngForOf",t.form.fields[2].fields),u.Gb(5),u.Hc(" ",u.kc(22,9,u.jc(23,12,t.remainingBalance),"\xa3")," "),u.Gb(3),u.pc("appFormErrors",t.errors),u.Gb(1),u.pc("form",t.form.formGroup)}}let L=(()=>{class t extends k.a{constructor(t,n,i,o,e){super(n,t,i,o,e,"monthly-distribution")}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Object(p.a)(this,void 0,void 0,(function*(){yield t.ngOnInit.call(this),this._watchFormToCalculateRemaining()}))}_createForm(){const t=[{name:"date",label:"Date",type:a.h.MONTH,defaultValue:this._resourceDate,disabled:!0,validators:{required:!0}},{name:"income",label:"Income",fields:this._mapCustomFields(this._meta.incomeFields,"income")},{name:"outgoing",label:"Outgoings",fields:this._mapCustomFields(this._meta.outgoingFields,"outgoing")}];return this._formFactory.createForm(t)}_watchFormToCalculateRemaining(){this.remainingBalance=this.form.formGroup.valueChanges.pipe(Object(d.a)(this.form.value),Object(g.a)(t=>{const n=Object(l.reduce)(t.income,(t,n)=>t+parseFloat(n||0),0),i=Object(l.reduce)(t.outgoing,(t,n)=>t+parseFloat(n||0),0);return Object(m.a)(n-i)}))}_mapCustomFields(t,n){return t.map(t=>{let i,o;return"balance carried"===t&&(i="This field is how much balance you have carried over from last month in to the current month, to help work out your total monthly spending.",o="Balance carried from last month"),{name:t,label:o||Object(l.startCase)(t),type:a.h.NUMBER,tooltip:i,defaultValue:this._data[n][t]}})}}return t.\u0275fac=function(n){return new(n||t)(u.Sb(y.a),u.Sb(a.a),u.Sb(r.c),u.Sb(r.a),u.Sb(C.a))},t.\u0275cmp=u.Mb({type:t,selectors:[["app-monthly-distribution-update-form"]],features:[u.Db],decls:1,vars:1,consts:[["class","MonthlyDistributionEntryForm-container animate-page-in",4,"ngIf"],[1,"MonthlyDistributionEntryForm-container","animate-page-in"],[1,"MonthlyDistributionEntryForm-form",3,"formGroup","ngSubmit"],[3,"formInputField"],[1,"MonthlyDistributionEntryForm-section"],[1,"MonthlyDistributionEntryForm-subtitle"],["routerLink","../../settings",1,"MonthlyDistributionEntryForm-moreFieldsLink"],["name","plus"],[3,"formInputField",4,"ngFor","ngForOf"],[1,"MonthlyDistributionEntryForm-remainingBalance"],[1,"MonthlyDistributionEntryForm-label"],[1,"MonthlyDistributionEntryForm-value"],[3,"appFormErrors"],["value","Save entry",1,"MonthlyDistributionEntryForm-submit",3,"form"]],template:function(t,n){1&t&&u.Dc(0,I,26,14,"div",0),2&t&&u.pc("ngIf",n.form)},directives:[o.m,e.u,e.k,e.e,a.i,r.e,O.a,o.l,_.a,P.a,a.e],pipes:[o.d,o.b],styles:['@keyframes zoom-in{0%{transform:scale(0)}to{transform:scale(1)}}.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:20px 15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding:var(--spacing-page-top) var(--spacing-page-side);height:100%}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding-top:calc(58px + var(--spacing-page-top))}}.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:400px;display:flex;flex-direction:column}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:100%}}.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{padding-top:30px;font-weight:500;color:#5a5a5a;font-size:22px;margin-bottom:20px;display:flex;align-items:baseline;justify-content:space-between}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{font-size:20px;padding-top:10px}}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]{color:#3657dc;font-weight:500;text-decoration:none;font-size:14px;display:flex;align-items:center}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]   i-feather[_ngcontent-%COMP%]{height:14px;width:14px;margin-right:5px}.MonthlyDistributionEntryForm-remainingBalance[_ngcontent-%COMP%]{background-color:rgba(54,87,220,.08);padding:30px;border-radius:10px;text-align:center;margin-bottom:20px}.MonthlyDistributionEntryForm-label[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px;color:#2b6cb0}.MonthlyDistributionEntryForm-value[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#3657dc}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-submit[_ngcontent-%COMP%]{display:none}}']}),t})();var T=i("XNiG"),G=i("1G5W"),X=i("B6aI"),W=i("Fxv7"),j=i("dhrX"),z=i("L21D");let B=(()=>{class t{constructor(t){this._chartService=t}ngOnChanges(){const t=Object(l.map)(this.monthlyDistributionPieChartData.outgoing,(t,n)=>({label:n,value:t})).sort((t,n)=>n.value-t.value);this._chartService.createPieChart("monthlyDistributionPieChart",{labels:t.map(t=>Object(l.startCase)(t.label)),datasets:[{data:t.map(t=>t.value),backgroundColor:[...W.b].reverse()}]},{legendPosition:"left"})}}return t.\u0275fac=function(n){return new(n||t)(u.Sb(j.a))},t.\u0275cmp=u.Mb({type:t,selectors:[["app-monthly-distribution-pie-chart"]],inputs:{monthlyDistributionPieChartData:"monthlyDistributionPieChartData"},features:[u.Eb],decls:2,vars:0,consts:[["cardTitle","Distribution this month"],["id","monthlyDistributionPieChart"]],template:function(t,n){1&t&&(u.Xb(0,"app-card",0),u.Tb(1,"canvas",1),u.Wb())},directives:[z.a],styles:[""]}),t})(),A=(()=>{class t{constructor(t){this._chartService=t}ngOnChanges(){const t=[...this.uncommittedSpendingChartData].reverse();this._chartService.createBarChart("monthlyDistributionSpendingChart",{labels:t.map(t=>t.date),datasets:[{label:"Uncommitted spending this month",data:t.map(t=>t.value),borderColor:"rgba(255,255,255, 0)",backgroundColor:[...W.a],borderWidth:2}]})}}return t.\u0275fac=function(n){return new(n||t)(u.Sb(j.a))},t.\u0275cmp=u.Mb({type:t,selectors:[["app-uncommitted-spending-chart"]],inputs:{uncommittedSpendingChartData:"uncommittedSpendingChartData"},features:[u.Eb],decls:2,vars:0,consts:[["cardTitle","Disposable income spending"],["id","monthlyDistributionSpendingChart"]],template:function(t,n){1&t&&(u.Xb(0,"app-card",0),u.Tb(1,"canvas",1),u.Wb())},directives:[z.a],styles:[""]}),t})(),Y=(()=>{class t{constructor(t){this._chartService=t}ngOnChanges(){const t=Object(l.map)(this.monthlyDistributionSpendingTrendChartData,(t,n)=>({label:n,value:t})).sort((t,n)=>n.value-t.value);this._chartService.createPieChart("monthlyDistributionPieChart2",{labels:t.map(t=>Object(l.startCase)(t.label)),datasets:[{data:t.map(t=>t.value),backgroundColor:[...W.b].reverse()}]},{legendPosition:"left"})}}return t.\u0275fac=function(n){return new(n||t)(u.Sb(j.a))},t.\u0275cmp=u.Mb({type:t,selectors:[["app-monthly-distribution-spending-trend-chart"]],inputs:{monthlyDistributionSpendingTrendChartData:"monthlyDistributionSpendingTrendChartData"},features:[u.Eb],decls:2,vars:0,consts:[["cardTitle","All Time Distribution"],["id","monthlyDistributionPieChart2"]],template:function(t,n){1&t&&(u.Xb(0,"app-card",0),u.Tb(1,"canvas",1),u.Wb())},directives:[z.a],styles:[""]}),t})();var $=i("DFzi"),H=i("U5Aj"),N=i("lTCs"),R=i("Xv+k"),U=i("HZTh");function J(t,n){if(1&t&&(u.Xb(0,"td",4),u.Fc(1),u.ic(2,"currency"),u.Wb()),2&t){const t=n.$implicit,i=u.hc().$implicit,o=u.hc();u.Gb(1),u.Hc(" ",u.mc(2,1,i[t],o.preferredCurrency,"symbol","1.0-2")," ")}}function V(t,n){if(1&t){const t=u.Yb();u.Xb(0,"tr",3),u.fc("click",(function(){u.uc(t);const i=n.$implicit;return u.hc().onLongPress(i.date)})),u.Xb(1,"td",4),u.Fc(2),u.ic(3,"date"),u.Wb(),u.Dc(4,J,3,6,"td",5),u.ic(5,"slice"),u.ic(6,"keys"),u.Wb()}if(2&t){const t=n.$implicit;u.Gb(2),u.Hc(" ",u.kc(3,2,t.date,"MMMM y")," "),u.Gb(2),u.pc("ngForOf",u.kc(5,5,u.jc(6,8,t),1))}}let q=(()=>{class t extends $.a{constructor(t,n,i,o){super(o,i,"monthly-distribution"),this._monthlyDistributionStore=t,this._popupService=n}ngOnChanges(){this.fields=this.monthlyDistributionLogCardMeta.fields.map(l.startCase),this.preferredCurrency=this.monthlyDistributionLogCardMeta.preferredCurrency,this._assignLogs()}removeLog(t){return Object(p.a)(this,void 0,void 0,(function*(){try{yield this._monthlyDistributionStore.delete(t)}catch({error:n}){this._popupService.showApiError(n)}}))}_assignLogs(){this.mappedLogs=this.monthlyDistributionLogCardItems.map(t=>this.monthlyDistributionLogCardMeta.fields.reduce((n,i)=>(n[i]=t[i]||t.income[i]||t.outgoing[i]||0,n),{}))}}return t.\u0275fac=function(n){return new(n||t)(u.Sb(y.a),u.Sb(H.a),u.Sb(N.a),u.Sb(r.c))},t.\u0275cmp=u.Mb({type:t,selectors:[["app-monthly-distribution-log-card"]],inputs:{monthlyDistributionLogCardItems:"monthlyDistributionLogCardItems",monthlyDistributionLogCardMeta:"monthlyDistributionLogCardMeta"},features:[u.Db,u.Eb],decls:3,vars:3,consts:[["cardTitle","Monthly Log",3,"cardActions"],[3,"tableColumns"],["class","MonthlyDistributionLogCard-row","tabindex","0",3,"click",4,"ngFor","ngForOf"],["tabindex","0",1,"MonthlyDistributionLogCard-row",3,"click"],[1,"MonthlyDistributionLogCard-rowItem"],["class","MonthlyDistributionLogCard-rowItem",4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(u.Xb(0,"app-card",0),u.Xb(1,"app-table",1),u.Dc(2,V,7,10,"tr",2),u.Wb(),u.Wb()),2&t&&(u.pc("cardActions",n.cardActions),u.Gb(1),u.pc("tableColumns",n.fields),u.Gb(1),u.pc("ngForOf",n.mappedLogs))},directives:[z.a,R.a,o.l],pipes:[o.f,o.t,U.a,o.d],styles:['@keyframes zoom-in{0%{transform:scale(0)}to{transform:scale(1)}}.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:20px 15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistributionLogCard-row[_ngcontent-%COMP%]{padding:15px 0}.MonthlyDistributionLogCard-row[_ngcontent-%COMP%]:hover{background-color:#eef2fd;cursor:pointer}.MonthlyDistributionLogCard-row[_ngcontent-%COMP%]:focus{outline:0}.MonthlyDistributionLogCard-row[_ngcontent-%COMP%]:focus-visible{outline:2px dashed orange}.MonthlyDistributionLogCard-rowItem[_ngcontent-%COMP%]{color:#5a5a5a;border-top:1px solid #e5e5e5;white-space:nowrap;padding:15px 15px 15px 0}']}),t})();function K(t,n){1&t&&(u.Xb(0,"p",5),u.Fc(1," To get started, you can configure your table columns in the "),u.Xb(2,"a",6),u.Fc(3,"settings"),u.Wb(),u.Fc(4," area, or go ahead and create a new log "),u.Xb(5,"a",7),u.Fc(6,"here"),u.Wb(),u.Fc(7,". "),u.Wb())}function Q(t,n){if(1&t&&(u.Xb(0,"div",8),u.Tb(1,"app-monthly-distribution-pie-chart",9),u.Tb(2,"app-uncommitted-spending-chart",10),u.Tb(3,"app-monthly-distribution-spending-trend-chart",11),u.Tb(4,"app-monthly-distribution-log-card",12),u.Wb()),2&t){const t=u.hc(2);u.Gb(1),u.pc("monthlyDistributionPieChartData",t.monthlyDistributionItems[0]),u.Gb(1),u.pc("uncommittedSpendingChartData",t.monthlyDistributionMeta.uncommittedSpendingData),u.Gb(1),u.pc("monthlyDistributionSpendingTrendChartData",t.monthlyDistributionMeta.allTimeDistribution),u.Gb(1),u.pc("monthlyDistributionLogCardItems",t.monthlyDistributionItems)("monthlyDistributionLogCardMeta",t.monthlyDistributionMeta)}}function Z(t,n){if(1&t&&(u.Xb(0,"div",2),u.Dc(1,K,8,0,"p",3),u.Dc(2,Q,5,5,"ng-template",null,4,u.Ec),u.Wb()),2&t){const t=u.sc(3),n=u.hc();u.Gb(1),u.pc("ngIf",!n.monthlyDistributionItems.length)("ngIfElse",t)}}const tt=[{path:"edit/:date",component:L,canDeactivate:[s.a]},{path:"",component:(()=>{class t{constructor(t,n){this._router=t,this._monthlyDistributionStore=n,this._destroy$=new T.a}ngOnInit(){return Object(p.a)(this,void 0,void 0,(function*(){this._monthlyDistributionStore.getAll$().pipe(Object(G.a)(this._destroy$)).subscribe(this._assignLogs.bind(this))}))}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}createNew(){this._router.navigateByUrl("monthly-distribution/create")}_assignLogs({data:t,meta:n}){return Object(p.a)(this,void 0,void 0,(function*(){this.monthlyDistributionItems=t,this.monthlyDistributionMeta=n}))}}return t.\u0275fac=function(n){return new(n||t)(u.Sb(r.c),u.Sb(y.a))},t.\u0275cmp=u.Mb({type:t,selectors:[["app-monthly-distribution"]],decls:2,vars:1,consts:[["class","MonthlyDistribution-container animate-page-in",4,"ngIf"],["floatingActionButtonText","New log","floatingActionButtonIcon","plus",3,"floatingActionButtonClick"],[1,"MonthlyDistribution-container","animate-page-in"],["class","MonthlyDistribution-noItems",4,"ngIf","ngIfElse"],["content",""],[1,"MonthlyDistribution-noItems"],["routerLink","../settings"],["routerLink","create"],[1,"MonthlyDistribution-content"],[1,"MonthlyDistribution-item","MonthlyDistribution-pie","animate-list-item",3,"monthlyDistributionPieChartData"],[1,"MonthlyDistribution-item","MonthlyDistribution-line","animate-list-item",3,"uncommittedSpendingChartData"],[1,"MonthlyDistribution-item","MonthlyDistribution-trending","animate-list-item",3,"monthlyDistributionSpendingTrendChartData"],[1,"MonthlyDistribution-item","MonthlyDistribution-log","animate-list-item",3,"monthlyDistributionLogCardItems","monthlyDistributionLogCardMeta"]],template:function(t,n){1&t&&(u.Dc(0,Z,4,2,"div",0),u.Xb(1,"app-floating-action-button",1),u.fc("floatingActionButtonClick",(function(){return n.createNew()})),u.Wb()),2&t&&u.pc("ngIf",n.monthlyDistributionItems)},directives:[o.m,X.a,r.e,B,A,Y,q],styles:['@keyframes zoom-in{0%{transform:scale(0)}to{transform:scale(1)}}.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:20px 15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistribution-container[_ngcontent-%COMP%]{padding:var(--spacing-page-top) var(--spacing-page-side);height:100%}@media only screen and (max-width:540px){.MonthlyDistribution-container[_ngcontent-%COMP%]{padding-top:calc(58px + var(--spacing-page-top))}}.MonthlyDistribution-noItems[_ngcontent-%COMP%]{color:#5a5a5a;margin-bottom:20px;max-width:700px;line-height:160%;font-size:18px}.MonthlyDistribution-noItems[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3657dc;font-weight:500;text-decoration:none}.MonthlyDistribution-noItems[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.MonthlyDistribution-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-gap:30px;grid-template-areas:"pie line trending" "log log log"}@media only screen and (max-width:1024px){.MonthlyDistribution-content[_ngcontent-%COMP%]{display:block}}.MonthlyDistribution-item[_ngcontent-%COMP%]{display:block;min-width:0}@media only screen and (max-width:1024px){.MonthlyDistribution-item[_ngcontent-%COMP%] + .MonthlyDistribution-item[_ngcontent-%COMP%]{margin-top:30px}}@media only screen and (max-width:540px){.MonthlyDistribution-item[_ngcontent-%COMP%] + .MonthlyDistribution-item[_ngcontent-%COMP%]{margin-top:20px}}.MonthlyDistribution-trending[_ngcontent-%COMP%]{grid-area:trending}.MonthlyDistribution-pie[_ngcontent-%COMP%]{grid-area:pie}.MonthlyDistribution-log[_ngcontent-%COMP%]{grid-area:log}.MonthlyDistribution-line[_ngcontent-%COMP%]{grid-area:line}.MonthlyDistribution-informationMessage[_ngcontent-%COMP%]{margin-top:0}']}),t})()},{path:"create",component:F,canDeactivate:[s.a]}];let nt=(()=>{class t{}return t.\u0275mod=u.Qb({type:t}),t.\u0275inj=u.Pb({factory:function(n){return new(n||t)},imports:[[o.c,a.j,e.f,e.q,c.a,r.f.forChild(tt)]]}),t})()}}]);