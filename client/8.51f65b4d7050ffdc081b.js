(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{bqYg:function(t,n,i){"use strict";i.r(n),i.d(n,"MonthlyDistributionModule",(function(){return nt}));var o=i("ofXK"),e=i("3Pt+"),r=i("tyNb"),a=i("zR64"),c=i("PCNd"),s=i("VPM5"),p=i("mrSG"),l=i("LvDl"),d=i("LRne"),m=i("JX91"),g=i("eIep"),b=i("URDK"),u=i("fXoL"),h=i("/JWr"),y=i("nhsl"),f=i("n8Gi"),x=i("bP2Y"),M=i("JqCM"),C=i("AicK"),O=i("8mtn"),P=i("uENB"),_=i("jht6");function v(t,n){1&t&&u.Mb(0,"ngx-form-input-number",3),2&t&&u.ic("formInputField",n.$implicit)}function w(t,n){1&t&&u.Mb(0,"ngx-form-input-number",3),2&t&&u.ic("formInputField",n.$implicit)}function D(t,n){if(1&t){const t=u.Rb();u.Qb(0,"div",1),u.Qb(1,"form",2),u.Yb("ngSubmit",(function(){return u.nc(t),u.ac().submitForm()})),u.Mb(2,"ngx-form-input",3),u.Qb(3,"div",4),u.Qb(4,"h2",5),u.yc(5),u.Qb(6,"a",6),u.Mb(7,"i-feather",7),u.yc(8," Add more fields"),u.Pb(),u.Pb(),u.wc(9,v,1,1,"ngx-form-input-number",8),u.Pb(),u.Qb(10,"div",4),u.Qb(11,"h2",5),u.yc(12),u.Qb(13,"a",6),u.Mb(14,"i-feather",7),u.yc(15," Add more fields"),u.Pb(),u.Pb(),u.wc(16,w,1,1,"ngx-form-input-number",8),u.Pb(),u.Qb(17,"div",9),u.Qb(18,"p",10),u.yc(19," Remaining spending money: "),u.Pb(),u.Qb(20,"p",11),u.yc(21),u.bc(22,"currency"),u.bc(23,"async"),u.Pb(),u.Pb(),u.Mb(24,"app-form-errors",12),u.Mb(25,"app-form-submit",13),u.Pb(),u.Pb()}if(2&t){const t=u.ac();u.zb(1),u.ic("formGroup",t.form.formGroup),u.zb(1),u.ic("formInputField",t.form.fields[0]),u.zb(3),u.Ac(" ",t.form.fields[1].label," "),u.zb(4),u.ic("ngForOf",t.form.fields[1].fields),u.zb(3),u.Ac(" ",t.form.fields[2].label," "),u.zb(4),u.ic("ngForOf",t.form.fields[2].fields),u.zb(5),u.Ac(" ",u.dc(22,9,u.cc(23,12,t.remainingBalance),"\xa3")," "),u.zb(3),u.ic("appFormErrors",t.errors),u.zb(1),u.ic("form",t.form.formGroup)}}let F=(()=>{class t extends b.a{constructor(t,n,i,o,e,r,a,c){super(a,o,r,c,"monthly-distribution"),this._formFactory=t,this._settingsService=n,this._dateService=i}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Object(p.a)(this,void 0,void 0,(function*(){yield this._getFields(),t.ngOnInit.call(this),this._watchFormToCalculateRemaining()}))}_createForm(){const t=[{name:"date",label:"Date",type:a.h.MONTH,defaultValue:this._dateService.getCurrentMonthAndYearForForm()},{name:"income",label:"Income",fields:this._mapCustomFields(this._incomingFields)},{name:"outgoing",label:"Outgoings",fields:this._mapCustomFields(this._outgoingFields)}];return this._formFactory.createForm(t)}_watchFormToCalculateRemaining(){this.remainingBalance=this.form.formGroup.valueChanges.pipe(Object(m.a)([{}]),Object(g.a)(t=>{const n=Object(l.reduce)(t.income,(t,n)=>t+parseFloat(n||0),0),i=Object(l.reduce)(t.outgoing,(t,n)=>t+parseFloat(n||0),0);return Object(d.a)(n-i)}))}_getFields(){return Object(p.a)(this,void 0,void 0,(function*(){const{data:t}=yield this._settingsService.getSettings();this._incomingFields=t.monthlyDistributionIncomeFields,this._outgoingFields=t.monthlyDistributionOutgoingFields}))}_mapCustomFields(t){return t.map(t=>{let n,i;return"balance carried"===t&&(n="This field is how much balance you have carried over from last month in to the current month, to help work out your total monthly spending.",i="Balance carried from last month"),"salary"===t&&(n="If updating your logs at the start of the month, this should be the salary you've just been paid at the end of last month."),{name:t,label:i||Object(l.startCase)(t),type:a.h.NUMBER,tooltip:n}})}}return t.\u0275fac=function(n){return new(n||t)(u.Lb(a.a),u.Lb(h.a),u.Lb(y.a),u.Lb(f.a),u.Lb(x.a),u.Lb(r.c),u.Lb(M.c),u.Lb(C.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-monthly-distribution-entry-form"]],features:[u.wb],decls:1,vars:1,consts:[["class","MonthlyDistributionEntryForm-container animate-page-in",4,"ngIf"],[1,"MonthlyDistributionEntryForm-container","animate-page-in"],[1,"MonthlyDistributionEntryForm-form",3,"formGroup","ngSubmit"],[3,"formInputField"],[1,"MonthlyDistributionEntryForm-section"],[1,"MonthlyDistributionEntryForm-subtitle"],["routerLink","../../settings",1,"MonthlyDistributionEntryForm-moreFieldsLink"],["name","plus"],[3,"formInputField",4,"ngFor","ngForOf"],[1,"MonthlyDistributionEntryForm-remainingBalance"],[1,"MonthlyDistributionEntryForm-label"],[1,"MonthlyDistributionEntryForm-value"],[3,"appFormErrors"],["value","Save entry",1,"MonthlyDistributionEntryForm-submit",3,"form"]],template:function(t,n){1&t&&u.wc(0,D,26,14,"div",0),2&t&&u.ic("ngIf",n.form)},directives:[o.m,e.u,e.k,e.e,a.i,r.e,O.a,o.l,P.a,_.a,a.e],pipes:[o.d,o.b],styles:['@keyframes zoom-in{0%{transform:scale(0)}to{transform:scale(1)}}.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:20px 15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding:var(--spacing-page-top) var(--spacing-page-side);height:100%}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding-top:calc(58px + var(--spacing-page-top))}}.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:400px;display:flex;flex-direction:column}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:100%}}.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{padding-top:30px;font-weight:500;color:#5a5a5a;font-size:22px;margin-bottom:20px;display:flex;align-items:baseline;justify-content:space-between}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{font-size:20px;padding-top:10px}}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]{color:#3657dc;font-weight:500;text-decoration:none;font-size:14px;display:flex;align-items:center}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]   i-feather[_ngcontent-%COMP%]{height:14px;width:14px;margin-right:5px}.MonthlyDistributionEntryForm-remainingBalance[_ngcontent-%COMP%]{background-color:rgba(54,87,220,.08);padding:30px;border-radius:10px;text-align:center;margin-bottom:20px}.MonthlyDistributionEntryForm-label[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px;color:#2b6cb0}.MonthlyDistributionEntryForm-value[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#3657dc}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-submit[_ngcontent-%COMP%]{display:none}}']}),t})();var k=i("1LVl");function L(t,n){1&t&&u.Mb(0,"ngx-form-input-number",3),2&t&&u.ic("formInputField",n.$implicit)}function z(t,n){1&t&&u.Mb(0,"ngx-form-input-number",3),2&t&&u.ic("formInputField",n.$implicit)}function E(t,n){if(1&t){const t=u.Rb();u.Qb(0,"div",1),u.Qb(1,"form",2),u.Yb("ngSubmit",(function(){return u.nc(t),u.ac().submitForm()})),u.Mb(2,"ngx-form-input",3),u.Qb(3,"div",4),u.Qb(4,"h2",5),u.yc(5),u.Qb(6,"a",6),u.Mb(7,"i-feather",7),u.yc(8," Add more fields"),u.Pb(),u.Pb(),u.wc(9,L,1,1,"ngx-form-input-number",8),u.Pb(),u.Qb(10,"div",4),u.Qb(11,"h2",5),u.yc(12),u.Qb(13,"a",6),u.Mb(14,"i-feather",7),u.yc(15," Add more fields"),u.Pb(),u.Pb(),u.wc(16,z,1,1,"ngx-form-input-number",8),u.Pb(),u.Qb(17,"div",9),u.Qb(18,"p",10),u.yc(19," Remaining spending money: "),u.Pb(),u.Qb(20,"p",11),u.yc(21),u.bc(22,"currency"),u.bc(23,"async"),u.Pb(),u.Pb(),u.Mb(24,"app-form-errors",12),u.Mb(25,"app-form-submit",13),u.Pb(),u.Pb()}if(2&t){const t=u.ac();u.zb(1),u.ic("formGroup",t.form.formGroup),u.zb(1),u.ic("formInputField",t.form.fields[0]),u.zb(3),u.Ac(" ",t.form.fields[1].label," "),u.zb(4),u.ic("ngForOf",t.form.fields[1].fields),u.zb(3),u.Ac(" ",t.form.fields[2].label," "),u.zb(4),u.ic("ngForOf",t.form.fields[2].fields),u.zb(5),u.Ac(" ",u.dc(22,9,u.cc(23,12,t.remainingBalance),"\xa3")," "),u.zb(3),u.ic("appFormErrors",t.errors),u.zb(1),u.ic("form",t.form.formGroup)}}let I=(()=>{class t extends k.a{constructor(t,n,i,o,e){super(n,t,i,o,e,"monthly-distribution")}ngOnInit(){const t=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Object(p.a)(this,void 0,void 0,(function*(){yield t.ngOnInit.call(this),this._watchFormToCalculateRemaining()}))}_createForm(){const t=[{name:"date",label:"Date",type:a.h.MONTH,defaultValue:this._resourceDate,disabled:!0,validators:{required:!0}},{name:"income",label:"Income",fields:this._mapCustomFields(this._meta.incomeFields,"income")},{name:"outgoing",label:"Outgoings",fields:this._mapCustomFields(this._meta.outgoingFields,"outgoing")}];return this._formFactory.createForm(t)}_watchFormToCalculateRemaining(){this.remainingBalance=this.form.formGroup.valueChanges.pipe(Object(m.a)(this.form.value),Object(g.a)(t=>{const n=Object(l.reduce)(t.income,(t,n)=>t+parseFloat(n||0),0),i=Object(l.reduce)(t.outgoing,(t,n)=>t+parseFloat(n||0),0);return Object(d.a)(n-i)}))}_mapCustomFields(t,n){return t.map(t=>{let i,o;return"balance carried"===t&&(i="This field is how much balance you have carried over from last month in to the current month, to help work out your total monthly spending.",o="Balance carried from last month"),{name:t,label:o||Object(l.startCase)(t),type:a.h.NUMBER,tooltip:i,defaultValue:this._data[n][t]}})}}return t.\u0275fac=function(n){return new(n||t)(u.Lb(f.a),u.Lb(a.a),u.Lb(r.c),u.Lb(r.a),u.Lb(C.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-monthly-distribution-update-form"]],features:[u.wb],decls:1,vars:1,consts:[["class","MonthlyDistributionEntryForm-container animate-page-in",4,"ngIf"],[1,"MonthlyDistributionEntryForm-container","animate-page-in"],[1,"MonthlyDistributionEntryForm-form",3,"formGroup","ngSubmit"],[3,"formInputField"],[1,"MonthlyDistributionEntryForm-section"],[1,"MonthlyDistributionEntryForm-subtitle"],["routerLink","../../settings",1,"MonthlyDistributionEntryForm-moreFieldsLink"],["name","plus"],[3,"formInputField",4,"ngFor","ngForOf"],[1,"MonthlyDistributionEntryForm-remainingBalance"],[1,"MonthlyDistributionEntryForm-label"],[1,"MonthlyDistributionEntryForm-value"],[3,"appFormErrors"],["value","Save entry",1,"MonthlyDistributionEntryForm-submit",3,"form"]],template:function(t,n){1&t&&u.wc(0,E,26,14,"div",0),2&t&&u.ic("ngIf",n.form)},directives:[o.m,e.u,e.k,e.e,a.i,r.e,O.a,o.l,P.a,_.a,a.e],pipes:[o.d,o.b],styles:['@keyframes zoom-in{0%{transform:scale(0)}to{transform:scale(1)}}.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:20px 15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding:var(--spacing-page-top) var(--spacing-page-side);height:100%}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-container[_ngcontent-%COMP%]{padding-top:calc(58px + var(--spacing-page-top))}}.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:400px;display:flex;flex-direction:column}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-form[_ngcontent-%COMP%]{max-width:100%}}.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{padding-top:30px;font-weight:500;color:#5a5a5a;font-size:22px;margin-bottom:20px;display:flex;align-items:baseline;justify-content:space-between}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-subtitle[_ngcontent-%COMP%]{font-size:20px;padding-top:10px}}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]{color:#3657dc;font-weight:500;text-decoration:none;font-size:14px;display:flex;align-items:center}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.MonthlyDistributionEntryForm-moreFieldsLink[_ngcontent-%COMP%]   i-feather[_ngcontent-%COMP%]{height:14px;width:14px;margin-right:5px}.MonthlyDistributionEntryForm-remainingBalance[_ngcontent-%COMP%]{background-color:rgba(54,87,220,.08);padding:30px;border-radius:10px;text-align:center;margin-bottom:20px}.MonthlyDistributionEntryForm-label[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px;color:#2b6cb0}.MonthlyDistributionEntryForm-value[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#3657dc}@media only screen and (max-width:540px){.MonthlyDistributionEntryForm-submit[_ngcontent-%COMP%]{display:none}}']}),t})();var S=i("XNiG"),Q=i("1G5W"),j=i("B6aI"),A=i("Fxv7"),T=i("dhrX"),B=i("L21D");let Y=(()=>{class t{constructor(t){this._chartService=t}ngOnChanges(){const t=Object(l.map)(this.monthlyDistributionPieChartData.outgoing,(t,n)=>({label:n,value:t})).sort((t,n)=>n.value-t.value);this._chartService.createPieChart("monthlyDistributionPieChart",{labels:t.map(t=>Object(l.startCase)(t.label)),datasets:[{data:t.map(t=>t.value),backgroundColor:[...A.b].reverse()}]},{legendPosition:"left"})}}return t.\u0275fac=function(n){return new(n||t)(u.Lb(T.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-monthly-distribution-pie-chart"]],inputs:{monthlyDistributionPieChartData:"monthlyDistributionPieChartData"},features:[u.xb],decls:2,vars:0,consts:[["cardTitle","Distribution this month"],["id","monthlyDistributionPieChart"]],template:function(t,n){1&t&&(u.Qb(0,"app-card",0),u.Mb(1,"canvas",1),u.Pb())},directives:[B.a],styles:[""]}),t})(),G=(()=>{class t{constructor(t){this._chartService=t}ngOnChanges(){const t=[...this.uncommittedSpendingChartData].reverse();this._chartService.createBarChart("monthlyDistributionSpendingChart",{labels:t.map(t=>t.date),datasets:[{label:"Uncommitted spending this month",data:t.map(t=>t.value),borderColor:"rgba(255,255,255, 0)",backgroundColor:[...A.a],borderWidth:2}]})}}return t.\u0275fac=function(n){return new(n||t)(u.Lb(T.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-uncommitted-spending-chart"]],inputs:{uncommittedSpendingChartData:"uncommittedSpendingChartData"},features:[u.xb],decls:2,vars:0,consts:[["cardTitle","Disposable income spending"],["id","monthlyDistributionSpendingChart"]],template:function(t,n){1&t&&(u.Qb(0,"app-card",0),u.Mb(1,"canvas",1),u.Pb())},directives:[B.a],styles:[""]}),t})(),R=(()=>{class t{constructor(t){this._chartService=t}ngOnChanges(){const t=Object(l.map)(this.monthlyDistributionSpendingTrendChartData,(t,n)=>({label:n,value:t})).sort((t,n)=>n.value-t.value);this._chartService.createPieChart("monthlyDistributionPieChart2",{labels:t.map(t=>Object(l.startCase)(t.label)),datasets:[{data:t.map(t=>t.value),backgroundColor:[...A.b].reverse()}]},{legendPosition:"left"})}}return t.\u0275fac=function(n){return new(n||t)(u.Lb(T.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-monthly-distribution-spending-trend-chart"]],inputs:{monthlyDistributionSpendingTrendChartData:"monthlyDistributionSpendingTrendChartData"},features:[u.xb],decls:2,vars:0,consts:[["cardTitle","All Time Distribution"],["id","monthlyDistributionPieChart2"]],template:function(t,n){1&t&&(u.Qb(0,"app-card",0),u.Mb(1,"canvas",1),u.Pb())},directives:[B.a],styles:[""]}),t})();var $=i("DFzi"),N=i("U5Aj"),J=i("lTCs"),U=i("Xv+k"),X=i("HZTh");function V(t,n){if(1&t&&(u.Qb(0,"td",4),u.yc(1),u.bc(2,"currency"),u.Pb()),2&t){const t=n.$implicit,i=u.ac().$implicit,o=u.ac();u.zb(1),u.Ac(" ",u.fc(2,1,i[t],o.preferredCurrency,"symbol","1.0-2")," ")}}function q(t,n){if(1&t){const t=u.Rb();u.Qb(0,"tr",3),u.Yb("click",(function(){u.nc(t);const i=n.$implicit;return u.ac().onLongPress(i.date)})),u.Qb(1,"td",4),u.yc(2),u.bc(3,"date"),u.Pb(),u.wc(4,V,3,6,"td",5),u.bc(5,"slice"),u.bc(6,"keys"),u.Pb()}if(2&t){const t=n.$implicit;u.zb(2),u.Ac(" ",u.dc(3,2,t.date,"MMMM y")," "),u.zb(2),u.ic("ngForOf",u.dc(5,5,u.cc(6,8,t),1))}}let H=(()=>{class t extends $.a{constructor(t,n,i,o){super(o,i,"monthly-distribution"),this._monthlyDistributionStore=t,this._popupService=n}ngOnChanges(){this.fields=this.monthlyDistributionLogCardMeta.fields.map(l.startCase),this.preferredCurrency=this.monthlyDistributionLogCardMeta.preferredCurrency,this._assignLogs()}removeLog(t){return Object(p.a)(this,void 0,void 0,(function*(){try{yield this._monthlyDistributionStore.delete(t)}catch({error:n}){this._popupService.showApiError(n)}}))}_assignLogs(){this.mappedLogs=this.monthlyDistributionLogCardItems.map(t=>this.monthlyDistributionLogCardMeta.fields.reduce((n,i)=>(n[i]=t[i]||t.income[i]||t.outgoing[i]||0,n),{}))}}return t.\u0275fac=function(n){return new(n||t)(u.Lb(f.a),u.Lb(N.a),u.Lb(J.a),u.Lb(r.c))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-monthly-distribution-log-card"]],inputs:{monthlyDistributionLogCardItems:"monthlyDistributionLogCardItems",monthlyDistributionLogCardMeta:"monthlyDistributionLogCardMeta"},features:[u.wb,u.xb],decls:3,vars:3,consts:[["cardTitle","Monthly Log",3,"cardActions"],[3,"tableColumns"],["class","MonthlyDistributionLogCard-row","tabindex","0",3,"click",4,"ngFor","ngForOf"],["tabindex","0",1,"MonthlyDistributionLogCard-row",3,"click"],[1,"MonthlyDistributionLogCard-rowItem"],["class","MonthlyDistributionLogCard-rowItem",4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(u.Qb(0,"app-card",0),u.Qb(1,"app-table",1),u.wc(2,q,7,10,"tr",2),u.Pb(),u.Pb()),2&t&&(u.ic("cardActions",n.cardActions),u.zb(1),u.ic("tableColumns",n.fields),u.zb(1),u.ic("ngForOf",n.mappedLogs))},directives:[B.a,U.a,o.l],pipes:[o.f,o.t,X.a,o.d],styles:['@keyframes zoom-in{0%{transform:scale(0)}to{transform:scale(1)}}.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:20px 15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistributionLogCard-row[_ngcontent-%COMP%]{padding:15px 0}.MonthlyDistributionLogCard-row[_ngcontent-%COMP%]:hover{background-color:#eef2fd;cursor:pointer}.MonthlyDistributionLogCard-row[_ngcontent-%COMP%]:focus{outline:0}.MonthlyDistributionLogCard-row[_ngcontent-%COMP%]:focus-visible{outline:2px dashed orange}.MonthlyDistributionLogCard-rowItem[_ngcontent-%COMP%]{color:#5a5a5a;border-top:1px solid #e5e5e5;white-space:nowrap;padding:15px 15px 15px 0}']}),t})();function K(t,n){1&t&&(u.Qb(0,"p",5),u.yc(1," To get started, you can configure your table columns in the "),u.Qb(2,"a",6),u.yc(3,"settings"),u.Pb(),u.yc(4," area, or go ahead and create a new log "),u.Qb(5,"a",7),u.yc(6,"here"),u.Pb(),u.yc(7,". "),u.Pb())}function W(t,n){if(1&t&&(u.Qb(0,"div",8),u.Mb(1,"app-monthly-distribution-pie-chart",9),u.Mb(2,"app-uncommitted-spending-chart",10),u.Mb(3,"app-monthly-distribution-spending-trend-chart",11),u.Mb(4,"app-monthly-distribution-log-card",12),u.Pb()),2&t){const t=u.ac(2);u.zb(1),u.ic("monthlyDistributionPieChartData",t.monthlyDistributionItems[0]),u.zb(1),u.ic("uncommittedSpendingChartData",t.monthlyDistributionMeta.uncommittedSpendingData),u.zb(1),u.ic("monthlyDistributionSpendingTrendChartData",t.monthlyDistributionMeta.allTimeDistribution),u.zb(1),u.ic("monthlyDistributionLogCardItems",t.monthlyDistributionItems)("monthlyDistributionLogCardMeta",t.monthlyDistributionMeta)}}function Z(t,n){if(1&t&&(u.Qb(0,"div",2),u.wc(1,K,8,0,"p",3),u.wc(2,W,5,5,"ng-template",null,4,u.xc),u.Pb()),2&t){const t=u.lc(3),n=u.ac();u.zb(1),u.ic("ngIf",!n.monthlyDistributionItems.length)("ngIfElse",t)}}const tt=[{path:"edit/:date",component:I,canDeactivate:[s.a]},{path:"",component:(()=>{class t{constructor(t,n){this._router=t,this._monthlyDistributionStore=n,this._destroy$=new S.a}ngOnInit(){return Object(p.a)(this,void 0,void 0,(function*(){this._monthlyDistributionStore.getAll$().pipe(Object(Q.a)(this._destroy$)).subscribe(this._assignLogs.bind(this))}))}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}createNew(){this._router.navigateByUrl("monthly-distribution/create")}_assignLogs({data:t,meta:n}){return Object(p.a)(this,void 0,void 0,(function*(){this.monthlyDistributionItems=t,this.monthlyDistributionMeta=n}))}}return t.\u0275fac=function(n){return new(n||t)(u.Lb(r.c),u.Lb(f.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-monthly-distribution"]],decls:2,vars:1,consts:[["class","MonthlyDistribution-container animate-page-in",4,"ngIf"],["floatingActionButtonText","New log","floatingActionButtonIcon","plus",3,"floatingActionButtonClick"],[1,"MonthlyDistribution-container","animate-page-in"],["class","MonthlyDistribution-noItems",4,"ngIf","ngIfElse"],["content",""],[1,"MonthlyDistribution-noItems"],["routerLink","../settings"],["routerLink","create"],[1,"MonthlyDistribution-content"],[1,"MonthlyDistribution-item","MonthlyDistribution-pie","animate-list-item",3,"monthlyDistributionPieChartData"],[1,"MonthlyDistribution-item","MonthlyDistribution-line","animate-list-item",3,"uncommittedSpendingChartData"],[1,"MonthlyDistribution-item","MonthlyDistribution-trending","animate-list-item",3,"monthlyDistributionSpendingTrendChartData"],[1,"MonthlyDistribution-item","MonthlyDistribution-log","animate-list-item",3,"monthlyDistributionLogCardItems","monthlyDistributionLogCardMeta"]],template:function(t,n){1&t&&(u.wc(0,Z,4,2,"div",0),u.Qb(1,"app-floating-action-button",1),u.Yb("floatingActionButtonClick",(function(){return n.createNew()})),u.Pb()),2&t&&u.ic("ngIf",n.monthlyDistributionItems)},directives:[o.m,j.a,r.e,Y,G,R,H],styles:['@keyframes zoom-in{0%{transform:scale(0)}to{transform:scale(1)}}.mat-menu-panel[_ngcontent-%COMP%]{min-height:0!important;border-radius:10px!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}  .mat-dialog-container{overflow:initial;border-radius:10px;padding:30px;position:relative}@media only screen and (max-width:540px){  .mat-dialog-container{padding:20px 15px}}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{overflow-y:auto!important}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:30px}}@media only screen and (max-width:450px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{padding:10px}}@media only screen and (max-width:540px){.cdk-global-overlay-wrapper[_ngcontent-%COMP%]   .cdk-overlay-pane[_ngcontent-%COMP%]{max-width:100%!important;width:100%}}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:1}.toast-container[_ngcontent-%COMP%]{top:20px!important;right:20px!important}@media only screen and (max-width:540px){.toast-container[_ngcontent-%COMP%]{top:78px!important}}.ngx-toastr[_ngcontent-%COMP%]{width:400px!important;max-width:calc(100vw - 40px)!important;padding-left:80px!important;background-position:30px!important;border-radius:10px!important}@media only screen and (max-width:540px){.ngx-toastr[_ngcontent-%COMP%]{padding-left:50px!important;background-position:15px!important}}.toast-success[_ngcontent-%COMP%]{background-color:#48bb78!important}.toast-error[_ngcontent-%COMP%]{background-color:#fc8181!important}.toast-info[_ngcontent-%COMP%]{background-color:#6bace8!important}.animate-page-in[_ngcontent-%COMP%]{animation:enter-page .8s forwards}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]{animation:initial}}.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:enter-list .5s forwards;transform-origin:middle}@media (prefers-reduced-motion){.animate-page-in[_ngcontent-%COMP%]   .animate-list-item[_ngcontent-%COMP%]{animation:initial}}@keyframes enter-list{0%{transform:scale(.9)}to{transform:scale(1)}}@keyframes enter-page{0%{opacity:0}to{opacity:1}}.is-negative[_ngcontent-%COMP%]{position:relative}.is-negative[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#fc8181}@media only screen and (max-width:1024px){.is-negative[_ngcontent-%COMP%]{color:#fc8181!important}.is-negative[_ngcontent-%COMP%]:after{content:normal}}.is-positive[_ngcontent-%COMP%]{position:relative}.is-positive[_ngcontent-%COMP%]:after{content:"";position:absolute;height:8px;width:8px;border-radius:9999px;left:-15px;top:50%;transform:translateY(-50%);background-color:#48bb78}@media only screen and (max-width:1024px){.is-positive[_ngcontent-%COMP%]{color:#48bb78!important}.is-positive[_ngcontent-%COMP%]:after{content:normal}}[_ngcontent-%COMP%]:root{--color-form-input-border:rgba(28,128,220,0.3);--color-form-input-border--focus:#6bace8}.MonthlyDistribution-container[_ngcontent-%COMP%]{padding:var(--spacing-page-top) var(--spacing-page-side);height:100%}@media only screen and (max-width:540px){.MonthlyDistribution-container[_ngcontent-%COMP%]{padding-top:calc(58px + var(--spacing-page-top))}}.MonthlyDistribution-noItems[_ngcontent-%COMP%]{color:#5a5a5a;margin-bottom:20px;max-width:700px;line-height:160%;font-size:18px}.MonthlyDistribution-noItems[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3657dc;font-weight:500;text-decoration:none}.MonthlyDistribution-noItems[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.MonthlyDistribution-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-gap:30px;grid-template-areas:"pie line trending" "log log log"}@media only screen and (max-width:1024px){.MonthlyDistribution-content[_ngcontent-%COMP%]{display:block}}.MonthlyDistribution-item[_ngcontent-%COMP%]{display:block;min-width:0}@media only screen and (max-width:1024px){.MonthlyDistribution-item[_ngcontent-%COMP%] + .MonthlyDistribution-item[_ngcontent-%COMP%]{margin-top:30px}}@media only screen and (max-width:540px){.MonthlyDistribution-item[_ngcontent-%COMP%] + .MonthlyDistribution-item[_ngcontent-%COMP%]{margin-top:20px}}.MonthlyDistribution-trending[_ngcontent-%COMP%]{grid-area:trending}.MonthlyDistribution-pie[_ngcontent-%COMP%]{grid-area:pie}.MonthlyDistribution-log[_ngcontent-%COMP%]{grid-area:log}.MonthlyDistribution-line[_ngcontent-%COMP%]{grid-area:line}.MonthlyDistribution-informationMessage[_ngcontent-%COMP%]{margin-top:0}']}),t})()},{path:"create",component:F,canDeactivate:[s.a]}];let nt=(()=>{class t{}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(n){return new(n||t)},imports:[[o.c,a.j,e.f,e.q,c.a,r.f.forChild(tt)]]}),t})()}}]);